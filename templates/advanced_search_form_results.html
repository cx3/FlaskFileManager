<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <title>File Search</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        .container-dark {
            background-color: #333;
            color: #fff;
        }

        .container-dark input.form-control {
            background-color: #222;
            color: #fff;
        }

        .container-dark input.form-control:hover {
            background-color: #555;
            color: #ffcc00;
        }

        .container-dark label {
            color: #ff0000; /* czerwony kolor dla labela */
        }

        .container-dark input[type="text"] {
            color: #00ff00; /* zielony kolor dla tekstu w inputach typu text */
        }

        .container-dark input[type="number"] {
            color: #00ff00; /* zielony kolor dla tekstu w inputach typu number */
        }

        .container-dark input[type="datetime-local"] {
            color: #00ff00; /* zielony kolor dla tekstu w inputach typu datetime-local */
        }

        .table-header {
            color: yellow; /* Kolor nagłówka */
        }

        body {
            background-color: #050d01;
            //background-color: #222;
            //color: #fff;
        }
        th {
            background-color: #013c69;
            color: #eeeeee;
        }
        table {
            width: 100%;        .table-header {
            color: yellow; /* Kolor nagłówka */
            border-collapse: collapse;
        }

        tr {
            color: #00ff00;
        }
        tr:hover {
            background-color: #333;
        }
        td:hover {
            font-weight: bold;
            font-color: #ff0000;
        }

        #status-bar-tr {
            color: black;
            background: #02f791;
            font-size: 18px; /* Tutaj ustaw rozmiar czcionki na 18 pikseli */
        }
    </style>
</head>
<body>


<div class="container-fluid container-dark">
    <div class="row mt-2">
        <div class="col-md-2">
            <label for="root_dir">Root Directory:</label>
            <input type="text" id="root_dir" class="form-control form-control-sm">
        </div>
        <div class="col-md-2">
            <label for="starts_with">Starts with:</label>
            <input type="text" id="starts_with" class="form-control form-control-sm">
        </div>
        <div class="col-md-2">
            <label for="ends_with">Ends with:</label>
            <input type="text" id="ends_with" class="form-control form-control-sm">
        </div>
        <div class="col-md-2">
            <label for="partial_name">Partial name:</label>
            <input type="text" id="partial_name" class="form-control form-control-sm">
        </div>
        <div class="col-md-2">
            <label for="min_size">Min size:</label>
            <input type="number" id="min_size" class="form-control form-control-sm">
        </div>
        <div class="col-md-2">
            <label for="max_size">Max size:</label>
            <input type="number" id="max_size" class="form-control form-control-sm">
        </div>
    </div>
    <div class="row mt-2">
        <div class="col-md-2">
            <label for="created_after">Created after:</label>
            <input type="datetime-local" id="created_after" class="form-control form-control-sm" name="created_after">
        </div>
        <div class="col-md-2">
            <label for="created_before">Created before:</label>
            <input type="datetime-local" id="created_before" class="form-control form-control-sm" name="created_before">
        </div>
        <div class="col-md-2">
            <label for="extension">Extension:</label>
            <input type="text" id="extension" class="form-control form-control-sm">
        </div>
        <div class="col-md-2">
            <label for="page">Page:</label>
            <input type="number" id="page" class="form-control form-control-sm" value="1" min="1" onchange="renderPage(this.value)">

        </div>
        <div class="col-md-2">
            <div class="btn-group" role="group" aria-label="Basic mixed styles example">


<div class="dropdown">
    <button class="btn btn-warning dropdown-toggle" type="button" id="dropdownRadioButton" data-bs-toggle="dropdown" aria-expanded="false">
        Sort...
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownRadioButton">
        <li>
            <label class="dropdown-item" for="column_path_radio">
                <input class="form-check-input me-2" type="radio" id="column_path_radio" name="column_radio">
                Path
            </label>
        </li>
        <li>
            <label class="dropdown-item" for="column_name_radio">
                <input class="form-check-input me-2" type="radio" id="column_name_radio" name="column_radio">
                Name
            </label>
        </li>
        <li>
            <label class="dropdown-item" for="column_size_radio">
                <input class="form-check-input me-2" type="radio" id="column_size_radio" name="column_radio" checked="checked">
                Size
            </label>
        </li>
        <li>
            <label class="dropdown-item" for="column_created_radio">
                <input class="form-check-input me-2" type="radio" id="column_created_radio" name="column_radio">
                Created
            </label>
        </li>
        <li>
            <label class="dropdown-item" for="column_extension_radio">
                <input class="form-check-input me-2" type="radio" id="column_extension_radio" name="column_radio">
                Extension
            </label>
        </li>
    </ul>
</div>


                <button type="button" class="btn btn-success">Right</button>

                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                        Select Columns
                    </button>
                    <!-- Dropdown menu -->
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <li><label class="dropdown-item" for="column_path_checkbox"><input type="checkbox" id="column_path_checkbox" class="column-checkbox" checked> Path</label></li>
                        <li><label class="dropdown-item" for="column_name_checkbox"><input type="checkbox" id="column_name_checkbox" class="column-checkbox" checked> Name</label></li>
                        <li><label class="dropdown-item" for="column_size_checkbox"><input type="checkbox" id="column_size_checkbox" class="column-checkbox" checked> Size</label></li>
                        <li><label class="dropdown-item" for="column_created_at_checkbox"><input type="checkbox" id="column_created_at_checkbox" class="column-checkbox" checked> Created At</label></li>
                        <li><label class="dropdown-item" for="column_permissions_checkbox"><input type="checkbox" id="column_permissions_checkbox" class="column-checkbox" checked> Permissions</label></li>
                        <li><label class="dropdown-item" for="column_extensions_checkbox"><input type="checkbox" id="column_extensions_checkbox" class="column-checkbox" checked> Extensions</label></li>
                    </ul>
                </div>

                <button onclick="sendForm()" class="btn btn-danger" id="searchStop">Search</button>
            </div>
        </div>

        </div>

        <div class="col-md-2">
            <!-- Przycisk do otwierania dropdowna z checkboxami -->

        </div>


    </div>
</div>  <!-- end of container -->



<table id="statusTable">
    <thead>
        <tr id="status-bar-tr">
        </tr>
    </thead>
</table>


<table id="dynamicTable" class="table-striped">
    <thead>
        <tr>
            <th id="column_path">Path</th>
            <th id="column_name">Name</th>
            <th id="column_size">Size</th>
            <th id="column_created_at">Created At</th>
            <th id="column_permissions">Permissions</th>
            <th id="column_extensions">Extensions</th>
            <th id="type">Type</th>
        </tr>
    </thead>
    <tbody id="dynamicContent">
    </tbody>
</table>

        <div id="gfg" class="modal modal-xl" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content" style="background: #43ab0c">
                    <div class="modal-header">
                        <div class="d-flex align-items-center justify-content-start" id="badgesDiv">
                            <h5 class="modal-title" id="modal-title">
                                <span class="badge text-bg-warning" id="modal-title-span"></span>
                            </h5>
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="modal-body">
                        <p>
                            It is a dialog box/popup window that is
                            displayed on top of the current page. DAMIAN MĄDRALINSKI TO WAZON I DZBAN
                        </p>
                    </div>

                    <div class="modal-body" id="modal-display-data">
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.js" ></script>

<script>
function sendForm() {
    console.log("sendForm...");
    var container = document.querySelector('.container-dark'); // Pobierz kontener
    var inputs = container.querySelectorAll('.form-control'); // Znajdź wszystkie inputy i selecty w kontenerze
    var link = "{{ url_for('custom_results_route') }}" + '?'; // Początek linku

    inputs.forEach(function(input) {
        var paramName = input.id; // Pobierz ID elementu jako nazwę parametru
        var paramValue = input.value; // Pobierz wartość elementu

        if (paramValue) {
            link += encodeURIComponent(paramName) + '=' + encodeURIComponent(paramValue) + '&';
        }
    });

    let radioButtons = document.querySelectorAll('input[type="radio"]');
    radioButtons.forEach(function(radio) {
        if (radio.checked) {
            link += radio.id + '=1';
        }
    });

    if (link.endsWith('&')) {
        link = link.slice(0, -1);
    }
    window.location.href = link;
}




function rowClicked(row) {

    var file_info = JSON.parse(row.getAttribute("data-json-text"));

    let modal = new bootstrap.Modal(document.getElementById('gfg'));
    //document.getElementById('modal-title-span').innerHTML = file_info.path;

    let linkedDirs = fullPathToLinkedDirList(file_info.path);
    let x = "{{ url_for('list_dir_route', server_dir='') }}";
    let rootTitle = document.getElementById('badgesDiv');
    rootTitle.innerHTML = "";

    for (let key in linkedDirs) {
        let h5 = document.createElement("h5");
        h5.innerHTML = '<a class="badge text-bg-warning" href="' + x + linkedDirs[key] + ' " target="_blank">' + key + '/</a>';
        rootTitle.appendChild(h5);
    }

    h5 = document.createElement("h5");
    h5.innerHTML = '<span class="badge text-bg-danger" href="' + x + file_info.name + ' ">' + file_info.name + '</span>';
    rootTitle.appendChild(h5);

    let body = document.getElementById('modal-body');

/*<span class="badge rounded-pill bg-primary">Primary</span>
<span class="badge rounded-pill bg-secondary">Secondary</span>
<span class="badge rounded-pill bg-success">Success</span>
<span class="badge rounded-pill bg-danger">Danger</span>
<span class="badge rounded-pill bg-warning text-dark">Warning</span>
<span class="badge rounded-pill bg-info text-dark">Info</span>
<span class="badge rounded-pill bg-light text-dark">Light</span>
<span class="badge rounded-pill bg-dark">Dark</span>*/


    body.innerHTML = "";

    let a = document.createElement("a");
    a.setAttribute("class", "badge rounded-pill bg-success");
    a.textContent = 'Download';
    a.href = "{{ url_for('get_file_route', path='')}}" + file_info.path;
    a.setAttribute("download", file_info.name);
    body.appendChild(a);

let disp = document.getElementById('modal-display-data');

    if (file_info.type === 'document' || file_info.type === 'text') {
        a = document.createElement("a");
        a.setAttribute("class", "badge rounded-pill bg-info");
        a.textContent = 'Edit';
        a.href = "{{ url_for('ace_editor_route', file='')}}" + file_info.path;
        a.setAttribute("target", "_blank");
        body.appendChild(a);

        disp.innerHTML = 'ace';
    }
    if (file_info.type === 'image') {
        let img = document.createElement('img');
        img.setAttribute("src", "{{ url_for('get_file_route', path='')}}" + file_info.path);
        disp.innerHTML = "";
        disp.appendChild(img);
    }
    if (file_info.type === 'audio') {
        disp.innerHTML = 'audio';
    }
    if (file_info.type === 'video') {
        disp.innerHTML = 'video';
    }

    modal.show();
}




</script>


 <script src="{{ url_for('static', filename='advanced_search_form_results.js') }}"></script>
</body>
</html>